# Setup Mock AA environment

Start anvil:

```bash
anvil --chain-id 1802203764
```

Deploy all contracts:

```bash
pnpm run start
```

## Contracts

`src/index.ts` will do the following operations:

- Deploy Deterministic Deployer (Non EIP-155): `0xaed6d9eCCd75039FC8F78266d235ccE614c02672` ([source code](https://github.com/Arachnid/deterministic-deployment-proxy))

- Deploy EntryPoint V0.6: `0x5Cc5517A886778bb01C5a39AeDd432B2FF9408Dc` ([source code](https://github.com/eth-infinitism/account-abstraction/blob/releases/v0.6/contracts/core/EntryPoint.sol))

- Deploy SimpleAccountFactory V0.6: `0x433c19391BAcA5d32D7C3E84e774d01D67C75232` ([source code](https://github.com/eth-infinitism/account-abstraction/blob/releases/v0.6/contracts/samples/SimpleAccountFactory.sol))

- Fund SmartAccount `0x8433C6F0CCaB804486db91655a42542816a46285` ([source code](https://github.com/eth-infinitism/account-abstraction/blob/releases/v0.6/contracts/samples/SimpleAccount.sol))

> Addresses and their bytecode are the same as on kakarot-sepolia

## Making Raw HandleOp Call

```bash
cast send 0x5Cc5517A886778bb01C5a39AeDd432B2FF9408Dc \
    0x1fad948c0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000433704c40f80cbff02e86fd36bc8bac5e31eb0c1000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000008433c6f0ccab804486db91655a42542816a462850000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000557300000000000000000000000000000000000000000000000000000000000086470000000000000000000000000000000000000000000000000000000000003d090000000000000000000000000000000000000000000000000000000003b9aca000000000000000000000000000000000000000000000000000000000008f0d180000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002200000000000000000000000000000000000000000000000000000000000000058433c19391BAcA5d32D7C3E84e774d01D67C752325fbfb9cf0000000000000000000000000503F3dC17c544a92Ed0AE9666000c9B6Ee5911200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041f0952365bd20be9dd60711759a4703d1cb46e8d968fc3696c3231262d33afb1c5728d4db31312f1782b5897010c1daa6dfec05ceec7faffe83ee073cff97ead21c00000000000000000000000000000000000000000000000000000000000000 \
    --gas-limit 1500000 \
    --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
```

## Raw UserOperation

```json
{
  "sender": "0x8433C6F0CCaB804486db91655a42542816a46285",
  "nonce": 0,
  "initCode": "0x433c19391BAcA5d32D7C3E84e774d01D67C752325fbfb9cf0000000000000000000000000503F3dC17c544a92Ed0AE9666000c9B6Ee591120000000000000000000000000000000000000000000000000000000000000000",
  "callData": "0x",
  "callGasLimit": 350000,
  "verificationGasLimit": 550000,
  "preVerificationGas": 250000,
  "maxFeePerGas": 1000000000,
  "maxPriorityFeePerGas": 150000000,
  "paymasterAndData": "0x",
  "signature": "0xf0952365bd20be9dd60711759a4703d1cb46e8d968fc3696c3231262d33afb1c5728d4db31312f1782b5897010c1daa6dfec05ceec7faffe83ee073cff97ead21c"
}
```

